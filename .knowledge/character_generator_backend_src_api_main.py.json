{"is_source_file": true, "format": "Python (FastAPI)", "description": "This file defines a REST API for a Star Wars character quiz and portrait creator. It includes data models, in-memory stores, endpoints for quiz management, user sessions, answer submissions, character matching, selfie uploads, portrait generation, and admin operations.", "external_files": ["/media/characters/vader.png", "/media/characters/luke.png", "/media/characters/leia.png"], "external_methods": ["os.path.join", "os.makedirs", "uuid.uuid4", "datetime.utcnow", "datetime.fromisoformat"], "published": ["FastAPI", "BaseModel", "Question", "Choice", "Character", "Quiz", "SessionCreateResponse", "SubmitAnswerRequest", "ScoreResult", "MatchResult", "AdminAuth", "QuestionCreate", "QuestionUpdate", "CharacterCreate", "CharacterUpdate", "QuizCreate", "QuizUpdate"], "classes": [{"name": "Choice", "description": "Represents a choice for a quiz question, with text, an ID, and optional weights to character IDs."}, {"name": "Question", "description": "Represents a quiz question with text, choices, order, and an ID."}, {"name": "Character", "description": "Represents a Star Wars character with identifying info, description, image URL, and traits."}, {"name": "Quiz", "description": "Represents a quiz with title, description, list of question IDs, and timestamps."}, {"name": "SessionCreateResponse", "description": "Response model for creating a session, including session ID and expiration."}, {"name": "SubmitAnswerRequest", "description": "Request model for submitting an answer, including session ID, quiz ID, question ID, and choice ID."}, {"name": "ScoreResult", "description": "Stores a score for a character ID."}, {"name": "MatchResult", "description": "Represents the result of character matching for a session, including scores, top match, character info, and portrait URL."}, {"name": "AdminAuth", "description": "Payload for admin authentication; contains a token."}, {"name": "QuestionCreate", "description": "Payload for creating a new question."}, {"name": "QuestionUpdate", "description": "Payload for updating an existing question."}, {"name": "CharacterCreate", "description": "Payload for creating a character."}, {"name": "CharacterUpdate", "description": "Payload for updating a character."}, {"name": "QuizCreate", "description": "Payload for creating a quiz."}, {"name": "QuizUpdate", "description": "Payload for updating a quiz."}], "methods": [{"name": "health_check()", "description": "Basic health check endpoint.", "scope": "", "scopeKind": ""}, {"name": "create_session(ttl_minutes: int = Query(default=60, description=\"Session time-to-live in minutes\"))", "description": "Creates a new user session with TTL and stores it in-memory.", "scope": "", "scopeKind": ""}, {"name": "list_quizzes()", "description": "Returns a list of all available quizzes.", "scope": "", "scopeKind": ""}, {"name": "get_quiz(quiz_id: str = Path(..., description=\"Quiz ID\"))", "description": "Retrieves a specific quiz by ID.", "scope": "", "scopeKind": ""}, {"name": "get_quiz_questions(quiz_id: str = Path(..., description=\"Quiz ID\"))", "description": "Returns the questions for a given quiz in order.", "scope": "", "scopeKind": ""}, {"name": "submit_answer", "description": "Records a user's answer to a question within a session."}, {"name": "List[ScoreResult] _compute_scores(session: Dict)", "description": "Calculates character scores based on answers and choice weights.", "scope": "", "scopeKind": ""}, {"name": "compute_match(session_id: str = Path(..., description=\"Session ID\"))", "description": "Calculates the top character match for a session based on answers.", "scope": "", "scopeKind": ""}, {"name": "upload_selfie", "description": "Handles uploading an image file associated with a session."}, {"name": "generate_portrait(session_id: str = Path(..., description=\"Session ID\"))", "description": "Simulates portrait generation by copying the uploaded selfie to results directory.", "scope": "", "scopeKind": ""}, {"name": "get_result(session_id: str = Path(..., description=\"Session ID\"))", "description": "Fetches the match and generated portrait URLs for a session.", "scope": "", "scopeKind": ""}, {"name": "serve_upload", "description": "Serves an uploaded selfie image file."}, {"name": "serve_result", "description": "Serves a generated portrait image file."}, {"name": "admin_auth(body: AdminAuth)", "description": "Validates admin token.", "scope": "", "scopeKind": ""}, {"name": "admin_list_questions(token: str = Query(..., description=\"Admin token\"))", "description": "Lists all questions for admin purposes.", "scope": "", "scopeKind": ""}, {"name": "admin_create_question(payload: QuestionCreate, token: str = Query(..., description=\"Admin token\"))", "description": "Creates a new question.", "scope": "", "scopeKind": ""}, {"name": "admin_update_question( question_id: str, payload: QuestionUpdate, token: str = Query(..., description=\"Admin token\"), )", "description": "Updates an existing question.", "scope": "", "scopeKind": ""}, {"name": "admin_delete_question(question_id: str, token: str = Query(..., description=\"Admin token\"))", "description": "Deletes a question.", "scope": "", "scopeKind": ""}, {"name": "admin_list_characters(token: str = Query(..., description=\"Admin token\"))", "description": "Lists all characters.", "scope": "", "scopeKind": ""}, {"name": "admin_create_character(payload: CharacterCreate, token: str = Query(..., description=\"Admin token\"))", "description": "Creates a new character.", "scope": "", "scopeKind": ""}, {"name": "admin_update_character( character_id: str, payload: CharacterUpdate, token: str = Query(..., description=\"Admin token\"), )", "description": "Updates an existing character.", "scope": "", "scopeKind": ""}, {"name": "admin_delete_character(character_id: str, token: str = Query(..., description=\"Admin token\"))", "description": "Deletes a character.", "scope": "", "scopeKind": ""}, {"name": "admin_list_quizzes(token: str = Query(..., description=\"Admin token\"))", "description": "Lists all quizzes.", "scope": "", "scopeKind": ""}, {"name": "admin_create_quiz(payload: QuizCreate, token: str = Query(..., description=\"Admin token\"))", "description": "Creates a new quiz.", "scope": "", "scopeKind": ""}, {"name": "admin_update_quiz( quiz_id: str, payload: QuizUpdate, token: str = Query(..., description=\"Admin token\"), )", "description": "Updates an existing quiz.", "scope": "", "scopeKind": ""}, {"name": "admin_delete_quiz(quiz_id: str, token: str = Query(..., description=\"Admin token\"))", "description": "Deletes a quiz.", "scope": "", "scopeKind": ""}, {"name": "websocket_usage_note", "description": "Provides info about WebSocket support (none currently)."}, {"name": "Dict _get_character_or_404(character_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict _get_question_or_404(question_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict _get_quiz_or_404(quiz_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict _get_session_or_404(session_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str _now_iso()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_require_admin(token: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_seed_demo_data()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["os.path.join", "os.makedirs", "uuid.uuid4", "datetime.utcnow", "datetime.fromisoformat", "FileResponse", "JSONResponse"], "search-terms": ["star-wars", "character", "quiz", "match", "portrait", "selfie", "API", "admin", "question", "character_store", "quiz_store", "session", "upload", "generate", "match", "portrait"], "state": 2, "file_id": 2, "knowledge_revision": 17, "git_revision": "1513b770c517804e96d7315e9e2b8ea96563a6c9", "revision_history": [{"9": "800dbccd860cc8d9767665860c01cfa855a3d7f4"}, {"17": "1513b770c517804e96d7315e9e2b8ea96563a6c9"}], "ctags": [{"_type": "tag", "name": "ADMIN_TOKEN", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^ADMIN_TOKEN = os.getenv(\"ADMIN_TOKEN\", \"dev-admin-token\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "AdminAuth", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class AdminAuth(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BASE_STORAGE_DIR", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^BASE_STORAGE_DIR = os.path.join(os.path.dirname(os.path.dirname(__file__)), \"..\", \"storage\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "CHARACTER_STORE", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^CHARACTER_STORE: Dict[str, Dict] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Dict]", "kind": "variable"}, {"_type": "tag", "name": "Character", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class Character(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CharacterCreate", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class CharacterCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CharacterUpdate", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class CharacterUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Choice", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class Choice(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MatchResult", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class MatchResult(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QUESTION_STORE", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^QUESTION_STORE: Dict[str, Dict] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Dict]", "kind": "variable"}, {"_type": "tag", "name": "QUIZ_STORE", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^QUIZ_STORE: Dict[str, Dict] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Dict]", "kind": "variable"}, {"_type": "tag", "name": "Question", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class Question(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuestionCreate", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class QuestionCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuestionUpdate", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class QuestionUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Quiz", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class Quiz(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuizCreate", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class QuizCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuizUpdate", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class QuizUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RESULTS_DIR", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^RESULTS_DIR = os.path.join(BASE_STORAGE_DIR, \"results\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "RESULT_STORE", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^RESULT_STORE: Dict[str, Dict] = {}  # session_id -> result dict that includes selected character/", "language": "Python", "typeref": "typename:Dict[str, Dict]", "kind": "variable"}, {"_type": "tag", "name": "SESSION_SECRET", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^SESSION_SECRET = os.getenv(\"SESSION_SECRET\", \"dev-secret\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SESSION_STORE", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^SESSION_STORE: Dict[str, Dict] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Dict]", "kind": "variable"}, {"_type": "tag", "name": "ScoreResult", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class ScoreResult(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SessionCreateResponse", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class SessionCreateResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SubmitAnswerRequest", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^class SubmitAnswerRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UPLOADS_DIR", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^UPLOADS_DIR = os.path.join(BASE_STORAGE_DIR, \"uploads\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_compute_scores", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def _compute_scores(session: Dict) -> List[ScoreResult]:$/", "language": "Python", "typeref": "typename:List[ScoreResult]", "kind": "function", "signature": "(session: Dict)"}, {"_type": "tag", "name": "_get_character_or_404", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def _get_character_or_404(character_id: str) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "(character_id: str)"}, {"_type": "tag", "name": "_get_question_or_404", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def _get_question_or_404(question_id: str) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "(question_id: str)"}, {"_type": "tag", "name": "_get_quiz_or_404", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def _get_quiz_or_404(quiz_id: str) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "(quiz_id: str)"}, {"_type": "tag", "name": "_get_session_or_404", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def _get_session_or_404(session_id: str) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "(session_id: str)"}, {"_type": "tag", "name": "_now_iso", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def _now_iso() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_require_admin", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def _require_admin(token: str):$/", "language": "Python", "kind": "function", "signature": "(token: str)"}, {"_type": "tag", "name": "_seed_demo_data", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def _seed_demo_data():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "admin_auth", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_auth(body: AdminAuth):$/", "language": "Python", "kind": "function", "signature": "(body: AdminAuth)"}, {"_type": "tag", "name": "admin_create_character", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_create_character(payload: CharacterCreate, token: str = Query(..., description=\"Admin /", "language": "Python", "kind": "function", "signature": "(payload: CharacterCreate, token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_create_question", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_create_question(payload: QuestionCreate, token: str = Query(..., description=\"Admin to/", "language": "Python", "kind": "function", "signature": "(payload: QuestionCreate, token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_create_quiz", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_create_quiz(payload: QuizCreate, token: str = Query(..., description=\"Admin token\")):$/", "language": "Python", "kind": "function", "signature": "(payload: QuizCreate, token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_delete_character", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_delete_character(character_id: str, token: str = Query(..., description=\"Admin token\")/", "language": "Python", "kind": "function", "signature": "(character_id: str, token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_delete_question", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_delete_question(question_id: str, token: str = Query(..., description=\"Admin token\")):$/", "language": "Python", "kind": "function", "signature": "(question_id: str, token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_delete_quiz", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_delete_quiz(quiz_id: str, token: str = Query(..., description=\"Admin token\")):$/", "language": "Python", "kind": "function", "signature": "(quiz_id: str, token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_list_characters", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_list_characters(token: str = Query(..., description=\"Admin token\")):$/", "language": "Python", "kind": "function", "signature": "(token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_list_questions", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_list_questions(token: str = Query(..., description=\"Admin token\")):$/", "language": "Python", "kind": "function", "signature": "(token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_list_quizzes", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_list_quizzes(token: str = Query(..., description=\"Admin token\")):$/", "language": "Python", "kind": "function", "signature": "(token: str = Query(..., description=\"Admin token\"))"}, {"_type": "tag", "name": "admin_update_character", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_update_character($/", "language": "Python", "kind": "function", "signature": "( character_id: str, payload: CharacterUpdate, token: str = Query(..., description=\"Admin token\"), )"}, {"_type": "tag", "name": "admin_update_question", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_update_question($/", "language": "Python", "kind": "function", "signature": "( question_id: str, payload: QuestionUpdate, token: str = Query(..., description=\"Admin token\"), )"}, {"_type": "tag", "name": "admin_update_quiz", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def admin_update_quiz($/", "language": "Python", "kind": "function", "signature": "( quiz_id: str, payload: QuizUpdate, token: str = Query(..., description=\"Admin token\"), )"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "character", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    character: Optional[Character] = Field(None, description=\"Resolved character detail\")$/", "language": "Python", "typeref": "typename:Optional[Character]", "kind": "variable", "scope": "MatchResult", "scopeKind": "class"}, {"_type": "tag", "name": "character_id", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    character_id: str = Field(..., description=\"Character ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ScoreResult", "scopeKind": "class"}, {"_type": "tag", "name": "choice_id", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    choice_id: str = Field(..., description=\"Selected choice ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SubmitAnswerRequest", "scopeKind": "class"}, {"_type": "tag", "name": "choices", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    choices: List[Choice] = Field(..., description=\"Choices for the question\")$/", "language": "Python", "typeref": "typename:List[Choice]", "kind": "variable", "scope": "QuestionCreate", "scopeKind": "class"}, {"_type": "tag", "name": "choices", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    choices: List[Choice] = Field(..., description=\"List of choices for the question\")$/", "language": "Python", "typeref": "typename:List[Choice]", "kind": "variable", "scope": "Question", "scopeKind": "class"}, {"_type": "tag", "name": "choices", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    choices: Optional[List[Choice]] = Field(None, description=\"Choices for the question\")$/", "language": "Python", "typeref": "typename:Optional[List[Choice]]", "kind": "variable", "scope": "QuestionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "compute_match", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def compute_match(session_id: str = Path(..., description=\"Session ID\")):$/", "language": "Python", "kind": "function", "signature": "(session_id: str = Path(..., description=\"Session ID\"))"}, {"_type": "tag", "name": "create_session", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def create_session(ttl_minutes: int = Query(default=60, description=\"Session time-to-live in min/", "language": "Python", "kind": "function", "signature": "(ttl_minutes: int = Query(default=60, description=\"Session time-to-live in minutes\"))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    created_at: str = Field(default_factory=_now_iso, description=\"Creation timestamp\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "MatchResult", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    created_at: str = Field(default_factory=_now_iso, description=\"Creation timestamp\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Quiz", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "CharacterUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Quiz description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Quiz", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Quiz description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "QuizCreate", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Quiz description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "QuizUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    description: str = Field(..., description=\"Character description\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Character", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    description: str = Field(..., description=\"Description\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CharacterCreate", "scopeKind": "class"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    expires_at: str = Field(..., description=\"UTC expiration timestamp\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SessionCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "generate_portrait", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def generate_portrait(session_id: str = Path(..., description=\"Session ID\")):$/", "language": "Python", "kind": "function", "signature": "(session_id: str = Path(..., description=\"Session ID\"))"}, {"_type": "tag", "name": "get_quiz", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def get_quiz(quiz_id: str = Path(..., description=\"Quiz ID\")):$/", "language": "Python", "kind": "function", "signature": "(quiz_id: str = Path(..., description=\"Quiz ID\"))"}, {"_type": "tag", "name": "get_quiz_questions", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def get_quiz_questions(quiz_id: str = Path(..., description=\"Quiz ID\")):$/", "language": "Python", "kind": "function", "signature": "(quiz_id: str = Path(..., description=\"Quiz ID\"))"}, {"_type": "tag", "name": "get_result", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def get_result(session_id: str = Path(..., description=\"Session ID\")):$/", "language": "Python", "kind": "function", "signature": "(session_id: str = Path(..., description=\"Session ID\"))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Unique character identifier\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Character", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Unique identifier for the choice\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Choice", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Unique identifier of the question\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Question", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Unique quiz identifier\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Quiz", "scopeKind": "class"}, {"_type": "tag", "name": "image_url", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    image_url: Optional[str] = Field(None, description=\"Image URL\\/path\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "CharacterCreate", "scopeKind": "class"}, {"_type": "tag", "name": "image_url", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    image_url: Optional[str] = Field(None, description=\"Image URL\\/path\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "CharacterUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "image_url", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    image_url: Optional[str] = Field(None, description=\"Optional URL\\/path for the character's b/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Character", "scopeKind": "class"}, {"_type": "tag", "name": "list_quizzes", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^def list_quizzes():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    name: Optional[str] = Field(None, description=\"Character display name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "CharacterUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    name: str = Field(..., description=\"Character display name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Character", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    name: str = Field(..., description=\"Character display name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CharacterCreate", "scopeKind": "class"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    order: Optional[int] = Field(None, description=\"Order index\")$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "QuestionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/star-wars-character-match-and-portrait-creator-94763-94776/character_generator_backend/src/api/main.py", "pattern": "/^    order: int = Field(..., description=\"Order index\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "QuestionCreate", "scopeKind": "class"}], "hash": "f5dc785fbd89afa2eb9e578ecc45274d", "format-version": 4, "code-base-name": "character_generator_backend", "filename": "character_generator_backend/src/api/main.py", "fields": [{"name": "ADMIN_TOKEN = os.getenv(\"ADMIN_TOKEN\", \"dev-admin-token\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "BASE_STORAGE_DIR = os.path.join(os.path.dirname(os.path.dirname(__file__)), \"..\", \"storage\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Dict] CHARACTER_STORE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Dict] QUESTION_STORE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Dict] QUIZ_STORE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "RESULTS_DIR = os.path.join(BASE_STORAGE_DIR, \"results\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Dict] RESULT_STORE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SESSION_SECRET = os.getenv(\"SESSION_SECRET\", \"dev-secret\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Dict] SESSION_STORE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "UPLOADS_DIR = os.path.join(BASE_STORAGE_DIR, \"uploads\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Character] character", "scope": "MatchResult", "scopeKind": "class", "description": "unavailable"}, {"name": "str character_id", "scope": "ScoreResult", "scopeKind": "class", "description": "unavailable"}, {"name": "str choice_id", "scope": "SubmitAnswerRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Choice] choices", "scope": "QuestionCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[List[Choice]] choices", "scope": "QuestionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str created_at", "scope": "MatchResult", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "CharacterUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str description", "scope": "Character", "scopeKind": "class", "description": "unavailable"}, {"name": "str expires_at", "scope": "SessionCreateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "Character", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] image_url", "scope": "CharacterCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] name", "scope": "CharacterUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str name", "scope": "Character", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] order", "scope": "QuestionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "int order", "scope": "QuestionCreate", "scopeKind": "class", "description": "unavailable"}]}